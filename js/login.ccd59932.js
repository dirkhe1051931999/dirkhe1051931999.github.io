/*!
 * design: https://github.com/dirkhe1051931999 
 *  hash: b9598d8d0c84a6d9f6b9
 * chunkhash: ccd59932915b166d6199
 * name: login
 * _: 2022-3-1 11:55:31
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"11cd":function(t,e,i){var s=i("bc87");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var o=i("499e").default;o("5c9beae2",s,!0,{sourceMap:!1})},"190a":function(t,e,i){var s=i("24fb");e=s(!1),e.push([t.i,".slidercaptcha-block{position:absolute;left:0;top:0}.sliderContainer{position:relative;text-align:center;line-height:40px;background:#eee;border-radius:2px}.sliderbg{position:absolute;left:0;right:0;top:0;background-color:#eee;height:40px}.sliderContainer_success .slider{background-color:#4db6ac}.sliderContainer_success .sliderMask{background-color:#b2dfdb}.sliderContainer_fail .slider{background:#ff8a80!important}.sliderContainer_fail .sliderMask{background:#ef9a9a!important}.sliderContainer_fail .slider,.sliderContainer_success .slider{color:#fff}.sliderContainer_active .sliderText,.sliderContainer_fail .sliderText,.sliderContainer_success .sliderText{display:none}.sliderMask{background:#b3e5fc}.slider,.sliderMask{position:absolute;left:0;top:0;height:40px;border-radius:2px}.slider{width:40px;background:#fff;-webkit-box-shadow:0 0 3px rgba(0,0,0,0.3);box-shadow:0 0 3px rgba(0,0,0,0.3);cursor:pointer;-webkit-transition:background 0.1s linear;transition:background 0.1s linear;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.slider:hover{background:#29b6f6;color:#fff}.sliderText{position:relative}.refreshIcon{position:absolute;right:10px;top:10px;cursor:pointer;color:#9e9e9e;font-size:14px;z-index:5;-webkit-transition:color 0.3s linear;transition:color 0.3s linear}.refreshIcon:hover{color:#252631}",""]),t.exports=e},"1fc3":function(t,e,i){t.exports=i.p+"img/login-bg.fc17fcc1.jpg"},4091:function(t,e,i){"use strict";i("11cd")},"48a3":function(t,e,i){var s=i("190a");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var o=i("499e").default;o("049e45c1",s,!0,{sourceMap:!1})},"688d":function(t,e,i){"use strict";i("48a3")},bc87:function(t,e,i){var s=i("24fb");e=s(!1),e.push([t.i,".login-card[data-v-29bae93f]{width:500px;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.login-card.h-540[data-v-29bae93f]{height:540px}.login-card.h-470[data-v-29bae93f]{height:470px}.useSwipeVerifyCode[data-v-29bae93f]{width:320px;height:310px;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}",""]),t.exports=e},efcf:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login-container relative window-height w-full"},[s("img",{staticClass:"absolute left-0 top-0 window-height w-full",attrs:{src:i("1fc3"),alt:""}}),s("q-card",{staticClass:"login-card",class:t.useVerifyCode?"h-540":"h-470"},[s("q-card-section",[s("h3",{staticClass:"text-center fs-20"},[t._v(t._s(t.PrdTitle))])]),s("q-card-section",{staticClass:"col justify-center"},[s("q-input",{attrs:{type:"text",label:"Username",rules:[function(t){return!!t||"required"}],autocapitalize:"off",autocomplete:"new-password"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),s("q-input",{staticClass:"input-password",attrs:{type:"text",label:"Password",rules:[function(t){return!!t||"required"}],autocapitalize:"off",autocomplete:"off"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),s("q-card-section",{directives:[{name:"show",rawName:"v-show",value:t.useVerifyCode,expression:"useVerifyCode"}],staticClass:"row j-between a-center p-t-0"},[s("q-input",{staticStyle:{width:"50%"},attrs:{type:"text",label:"Verify code",autocapitalize:"off",autocomplete:"current-password"},model:{value:t.verifyCode,callback:function(e){t.verifyCode=e},expression:"verifyCode"}}),s("div",{staticStyle:{width:"40%",height:"100%"},attrs:{id:"verify-code-login"}})],1),s("q-card-section",{staticClass:"row j-between a-center p-t-0"}),s("q-card-section",{staticClass:"text-right"},[s("div",{class:t.useSwipeVerifyCode?"text-primary":"text-grey"},[s("span",[t._v("Use swipe verification code to verify?")]),s("q-toggle",{model:{value:t.useSwipeVerifyCode,callback:function(e){t.useSwipeVerifyCode=e},expression:"useSwipeVerifyCode"}})],1),s("div",{class:t.useVerifyCode?"text-primary":"text-grey"},[s("span",[t._v("Use verification code to verify?")]),s("q-toggle",{model:{value:t.useVerifyCode,callback:function(e){t.useVerifyCode=e},expression:"useVerifyCode"}})],1)]),s("q-card-actions",[s("q-btn",{staticClass:"w-full h-50",attrs:{color:"primary",icon:"login",label:"Login",loading:t.loginLoading,disable:t.loginLoading},on:{click:function(e){return e.preventDefault(),t.handLogin.apply(null,arguments)}}})],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showUseSwipeVerifyCode,expression:"showUseSwipeVerifyCode"}],staticClass:"useSwipeVerifyCode"},[s("q-card",[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("Use swipe verification code to verify")])]),s("q-card-section",{staticClass:"q-pt-none"},[s("div",{attrs:{id:"captcha"}})])],1)],1)],1)},o=[],n=i("9ab4"),a=i("60a3"),r=i("9dba"),l=i("1f92");function c(){let t="a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z";return t.split(",")}function d(t,e){return Math.floor(Math.random()*(e-t)+t)}function h(t,e){let i=d(t,e),s=d(t,e),o=d(t,e);return"rgb("+i+","+s+","+o+")"}class p{constructor(t){if(this.options={domId:"",canvasId:"verifyCanvas",width:"100",height:"30",type:"blend",code:"",numArr:[],letterArr:[]},!t)throw new Error("invalid dom ID");this.options.domId=t,this.init(),this.refresh()}init(){this.options.numArr="0,1,2,3,4,5,6,7,8,9".split(","),this.options.letterArr=c();let t=document.getElementById(this.options.domId);if(!t)throw new Error("invalid dom");let e=document.createElement("canvas");this.options.width=t.offsetWidth>0?t.offsetWidth:"100",this.options.height=t.offsetHeight>0?t.offsetHeight:"30",e.id=this.options.canvasId,e.width=this.options.width,e.height=this.options.height,e.style.cursor="pointer",e.innerHTML="您的浏览器版本不支持canvas",t.appendChild(e),e.onclick=()=>{this.refresh()}}refresh(){let t,e,i=document.getElementById(this.options.canvasId);if(this.options.code="",i.getContext){t=i.getContext("2d"),t.textBaseline="middle",t.fillStyle=h(180,240),t.fillRect(0,0,this.options.width,this.options.height),e="blend"==this.options.type?this.options.numArr.concat(this.options.letterArr):"number"==this.options.type?this.options.numArr:this.options.letterArr;for(let i=1;i<=4;i++){let s=e[d(0,e.length)];this.options.code+=s,t.font=d(this.options.height/2,this.options.height)+"px SimHei",t.fillStyle=h(50,160),t.shadowOffsetX=d(-3,3),t.shadowOffsetY=d(-3,3),t.shadowBlur=d(-3,3),t.shadowColor="rgba(0, 0, 0, 0.3)";let o=this.options.width/5*i,n=this.options.height/2,a=d(-30,30);t.translate(o,n),t.rotate(a*Math.PI/180),t.fillText(s,0,0),t.rotate(-a*Math.PI/180),t.translate(-o,-n)}for(let e=0;e<4;e++)t.strokeStyle=h(40,180),t.beginPath(),t.moveTo(d(0,this.options.width),d(0,this.options.height)),t.lineTo(d(0,this.options.width),d(0,this.options.height)),t.stroke();for(let e=0;e<this.options.width/4;e++)t.fillStyle=h(0,255),t.beginPath(),t.arc(d(0,this.options.width),d(0,this.options.height),1,0,2*Math.PI),t.fill()}}validate(t){t=t.toLowerCase();let e=this.options.code.toLowerCase();return t==e}}class u{constructor(t,e){this.option={width:280,height:155,PI:Math.PI,sliderL:42,sliderR:9,offset:5,loadingText:"Loading...",failedText:"Refresh",barText:"Swipe right to fill the puzzle",maxLoadCount:3,localImages:()=>"/866-536x354.jpg",verify:(t,e)=>!0,remoteUrl:null,outSrc:"",onRefresh:()=>{},onSuccess:()=>{},onFail:()=>{}},this.canvasOption={},this.$element=t,this.option=Object.assign({},this.option,e),this.$element.style.position="relative",this.$element.style.width=this.option.width+"px",this.$element.style.margin="0 auto",this.init()}init(){this.initDOM(),this.initImg(),this.bindEvents()}initDOM(){var t=(t,e)=>{var i=document.createElement(t);return i.className=e,i},e=(t,e)=>{var i=document.createElement("canvas");return i.width=t,i.height=e,i},i=e(this.option.width-2,this.option.height),s=i.cloneNode(!0),o=t("div","sliderContainer"),n=t("i","refreshIcon "),a=t("div","sliderMask"),r=t("div","sliderbg"),l=t("div","slider"),c=t("i",""),d=t("span","sliderText");s.className="slidercaptcha-block",d.innerHTML=this.option.barText,n.innerHTML="Refresh",c.innerHTML="→";var h=this.$element;h.appendChild(i),h.appendChild(n),h.appendChild(s),l.appendChild(c),a.appendChild(l),o.appendChild(r),o.appendChild(a),o.appendChild(d),h.appendChild(o),Object.assign(this.canvasOption,{canvas:i,block:s,sliderContainer:o,refreshIcon:n,slider:l,sliderMask:a,sliderIcon:c,text:d,canvasCtx:i.getContext("2d"),blockCtx:s.getContext("2d"),x:0})}initImg(){var t,e,i="",s=window.navigator.userAgent.indexOf("Trident")>-1,o=this.option.sliderL+2*this.option.sliderR+3,n=(i,o)=>{var n=this.option.sliderL,a=this.option.sliderR,r=this.option.PI;i.beginPath(),i.moveTo(t,e),i.arc(t+n/2,e-a+2,a,.72*r,2.26*r),i.lineTo(t+n,e),i.arc(t+n+a-2,e+n/2,a,1.21*r,2.78*r),i.lineTo(t+n,e+n),i.lineTo(t,e+n),i.arc(t+a-2,e+n/2,a+.4,2.76*r,1.24*r,!0),i.lineTo(t,e),i.lineWidth=2,i.fillStyle="rgba(255, 255, 255, 0.7)",i.strokeStyle="rgba(255, 255, 255, 0.7)",i.stroke(),i[o](),i.globalCompositeOperation=s?"xor":"destination-over"},a=(t,e)=>Math.round(Math.random()*(e-t)+t),r=new Image;r.crossOrigin="Anonymous";var l=0;r.onload=()=>{this.canvasOption.x=t=a(o+10,this.option.width-(o+10)),e=a(10+2*this.option.sliderR,this.option.height-(o+10)),n(this.canvasOption.canvasCtx,"fill"),n(this.canvasOption.blockCtx,"clip"),this.canvasOption.canvasCtx.drawImage(r,0,0,this.option.width-2,this.option.height),this.canvasOption.blockCtx.drawImage(r,0,0,this.option.width-2,this.option.height);var i=e-2*this.option.sliderR-1,s=this.canvasOption.blockCtx.getImageData(t-3,i,o,o);this.canvasOption.block.width=o,this.canvasOption.blockCtx.putImageData(s,0,i+1),this.canvasOption.text.textContent=this.canvasOption.text.getAttribute("data-text")},r.onerror=()=>{if(l++,"file:"===window.location.protocol)throw l=this.option.maxLoadCount,new Error("can't load pic resource file from File protocal. Please try http or https");if(l>=this.option.maxLoadCount)return this.canvasOption.text.textContent="Image failed to load",void this.canvasOption.text.classList.add("text-red");r.src=this.option.localImages()},this.option.outSrc&&(i=this.option.outSrc),r.src=i,this.canvasOption.text.setAttribute("data-text",this.option.barText),this.canvasOption.text.textContent=this.option.loadingText}bindEvents(){this.$element.addEventListener("selectstart",(()=>!1)),this.canvasOption.refreshIcon.addEventListener("click",(()=>{this.canvasOption.text.textContent=this.option.barText,this.reset(),this.option.onRefresh.call(this.$element)}));var t,e,i=[],s=!1,o=i=>{this.canvasOption.text.classList.contains("text-danger")||(t=i.clientX||i.touches[0].clientX,e=i.clientY||i.touches[0].clientY,s=!0)},n=o=>{if(!s)return!1;var n=o.clientX||o.touches[0].clientX,a=o.clientY||o.touches[0].clientY,r=n-t,l=a-e;if(r<0||r+40>this.option.width)return!1;this.canvasOption.slider.style.left=r-1+"px";var c=(this.option.width-40-20)/(this.option.width-40)*r;this.canvasOption.block.style.left=c+"px",this.canvasOption.sliderContainer.classList.add("sliderContainer_active"),this.canvasOption.sliderMask.style.width=r+4+"px",i.push(Math.round(l))},a=e=>{if(!s)return!1;s=!1;var o=e.clientX||e.changedTouches[0].clientX;if(o===t)return!1;this.canvasOption.sliderContainer.classList.remove("sliderContainer_active"),this.canvasOption.trail=i;var n=this.verify();n.spliced&&n.verified?(this.canvasOption.sliderContainer.classList.add("sliderContainer_success"),this.option.onSuccess.call(this.$element)):(this.canvasOption.sliderContainer.classList.add("sliderContainer_fail"),this.option.onFail.call(this.$element),setTimeout((()=>{this.canvasOption.text.innerHTML=this.option.failedText,this.reset()}),1e3))};this.canvasOption.slider.addEventListener("mousedown",o),this.canvasOption.slider.addEventListener("touchstart",o),document.addEventListener("mousemove",n),document.addEventListener("touchmove",n),document.addEventListener("mouseup",a),document.addEventListener("touchend",a),document.addEventListener("mousedown",(function(){return!1})),document.addEventListener("touchstart",(function(){return!1})),document.addEventListener("swipe",(function(){return!1}))}clean(){this.canvasOption.canvasCtx.clearRect(0,0,this.option.width,this.option.height),this.canvasOption.blockCtx.clearRect(0,0,this.option.width,this.option.height),this.canvasOption.block.width=this.option.width}verify(){var t=this.canvasOption.trail,e=parseInt(this.canvasOption.block.style.left),i=!1;if(null!==this.option.remoteUrl)i=this.option.verify(t,this.option.remoteUrl);else{var s=function(t,e){return t+e},o=function(t){return t*t},n=t.reduce(s)/t.length,a=t.map((t=>t-n)),r=Math.sqrt(a.map(o).reduce(s)/t.length);i=0!==r}return{spliced:Math.abs(e-this.canvasOption.x)<this.option.offset,verified:i}}reset(){this.canvasOption.sliderContainer.classList.remove("sliderContainer_fail"),this.canvasOption.sliderContainer.classList.remove("sliderContainer_success"),this.canvasOption.slider.style.left=0,this.canvasOption.block.style.left=0,this.canvasOption.sliderMask.style.width=0,this.clean(),this.canvasOption.text.setAttribute("data-text",this.canvasOption.text.textContent),this.canvasOption.text.textContent=this.option.loadingText,this.initImg()}}let f=class extends a["c"]{constructor(){super(...arguments),this.username="admin",this.password="123456",this.verifyCode="",this.PrdTitle=l.title,this.otherQuery={},this.useVerifyCode=!1,this.useSwipeVerifyCode=!1,this.showUseSwipeVerifyCode=!1}get loginLoading(){return r["a"].loginLoading}onRouteChange(t){const e=t.query;e&&(this.redirect=e.redirect,this.otherQuery=this.getOtherQuery(e))}created(){}mounted(){try{this.verifyCodeInstance=new p("verify-code-login")}catch(t){console.log(t)}}getOtherQuery(t){return Object.keys(t).reduce(((e,i)=>("redirect"!==i&&(e[i]=t[i]),e)),{})}async handLogin(){let t=!0;if(this.useVerifyCode&&(t=this.verifyCodeInstance.validate(this.verifyCode)),!t)return void this.$q.notify({message:"Wrong verification code",color:"negative",multiLine:!0,icon:"mood_bad",actions:[{label:"Close",color:"white"}]});const e=()=>{r["a"].SET_LOGIN_LOADING(!0),setTimeout((async()=>{await r["a"].Login({username:this.username,password:this.password}),this.redirect?this.$router.push({path:this.redirect||"/dashboard"},(()=>{}),(()=>{})):this.$router.push("/dashboard"),setTimeout((()=>{r["a"].SET_LOGIN_LOADING(!1),this.useSwipeVerifyCode=!1,this.useVerifyCode=!1,this.$q.notify({message:`${this.$i18n.tc("messages.success")}`,color:"primary",multiLine:!0,icon:"mood",actions:[{label:"Close",color:"white"}]})}),1e3)}),1e3)};if(this.useSwipeVerifyCode){this.showUseSwipeVerifyCode=!0;var i=new u(document.querySelector("#captcha"),{id:"captcha",onSuccess:()=>{var t=setTimeout((()=>{this.showUseSwipeVerifyCode=!1,window.clearTimeout(t),i.reset(),e()}),500)}})}else e()}};Object(n["__decorate"])([Object(a["d"])("$route",{immediate:!0})],f.prototype,"onRouteChange",null),f=Object(n["__decorate"])([Object(a["a"])({name:"Index"})],f);var v=f,g=v,m=(i("688d"),i("4091"),i("2877")),w=i("f09f"),b=i("a370"),x=i("27f9"),C=i("9564"),y=i("4b7e"),O=i("9c40"),k=i("eebe"),L=i.n(k),I=Object(m["a"])(g,s,o,!1,null,"29bae93f",null);e["default"]=I.exports;L()(I,"components",{QCard:w["a"],QCardSection:b["a"],QInput:x["a"],QToggle:C["a"],QCardActions:y["a"],QBtn:O["a"]})}}]);