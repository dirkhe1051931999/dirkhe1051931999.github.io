"use strict";(globalThis["webpackChunkquasar_vue3_admin_template"]=globalThis["webpackChunkquasar_vue3_admin_template"]||[]).push([[535],{13704:(t,e,i)=>{i.r(e),i.d(e,{default:()=>nt});var o=i(59835),s=i(86970),n=i(61957);const a=t=>((0,o.dD)("data-v-19261fda"),t=t(),(0,o.Cn)(),t),r={class:"login-root"},d={class:"box-root flex-flex flex-direction--column",style:{"min-height":"100vh","flex-grow":"1"}},l=(0,o.uE)('<div class="loginbackground padding-top--64" data-v-19261fda><div class="loginbackground-gridContainer" data-v-19261fda><div class="box-root flex-flex" style="grid-area:top / start / 8 / end;" data-v-19261fda><div class="box-root" style="background-image:linear-gradient(\r\n                    white 0%,\r\n                    rgb(247, 250, 252) 33%\r\n                  );flex-grow:1;" data-v-19261fda></div></div><div class="box-root flex-flex" style="grid-area:4 / 2 / auto / 5;" data-v-19261fda><div class="box-root box-divider--light-all-2 animationLeftRight tans3s" style="flex-grow:1;" data-v-19261fda></div></div><div class="box-root flex-flex" style="grid-area:6 / start / auto / 2;" data-v-19261fda><div class="box-root box-background--blue800" style="flex-grow:1;" data-v-19261fda></div></div><div class="box-root flex-flex" style="grid-area:7 / start / auto / 4;" data-v-19261fda><div class="box-root box-background--blue animationLeftRight" style="flex-grow:1;" data-v-19261fda></div></div><div class="box-root flex-flex" style="grid-area:8 / 4 / auto / 6;" data-v-19261fda><div class="box-root box-background--gray100 animationLeftRight tans3s" style="flex-grow:1;" data-v-19261fda></div></div><div class="box-root flex-flex" style="grid-area:2 / 15 / auto / end;" data-v-19261fda><div class="box-root box-background--cyan200 animationRightLeft tans4s" style="flex-grow:1;" data-v-19261fda></div></div><div class="box-root flex-flex" style="grid-area:3 / 14 / auto / end;" data-v-19261fda><div class="box-root box-background--blue animationRightLeft" style="flex-grow:1;" data-v-19261fda></div></div><div class="box-root flex-flex" style="grid-area:4 / 17 / auto / 20;" data-v-19261fda><div class="box-root box-background--gray100 animationRightLeft tans4s" style="flex-grow:1;" data-v-19261fda></div></div><div class="box-root flex-flex" style="grid-area:5 / 14 / auto / 17;" data-v-19261fda><div class="box-root box-divider--light-all-2 animationRightLeft tans3s" style="flex-grow:1;" data-v-19261fda></div></div></div></div>',1),c={class:"box-root padding-top--24 flex-flex flex-direction--column",style:{"flex-grow":"1","z-index":"9"}},h={class:"box-root padding-top--48 padding-bottom--24 flex-flex flex-justifyContent--center"},p={class:"text-primary bg-gradient-primary text-gradient"},f={class:"formbg-outer"},u={class:"formbg"},v={class:"formbg-inner padding-horizontal--48"},g=a((()=>(0,o._)("span",{class:"padding-bottom--15"},"Sign in to your account",-1))),x={id:"stripe-login"},m={class:"field padding-bottom--24"},w=a((()=>(0,o._)("label",{for:"email"},"Username",-1))),y={class:"field padding-bottom--24"},b=a((()=>(0,o._)("div",{class:"grid--50-50"},[(0,o._)("label",{for:"password"},"Password"),(0,o._)("div",{class:"reset-pass"},[(0,o._)("a",{href:"#"},"Forgot your password?")])],-1))),C={class:"field padding-bottom--24"},_=a((()=>(0,o._)("label",{for:"verifyCode"},"Code",-1))),k={class:"flex justify-between"},O=a((()=>(0,o._)("div",{id:"verify-code-login",style:{width:"40%",height:"44px"}},null,-1))),L={class:"field field-checkbox padding-bottom--24 flex-flex align-center"},S={class:"field field-checkbox padding-bottom--24 flex-flex align-center"},I={class:"field padding-bottom--24"},T=a((()=>(0,o._)("div",{class:"field"},[(0,o._)("a",{class:"ssolink",href:"#"},"Use single sign-on (Google) instead")],-1))),V={class:"footer-link padding-top--24"},M=a((()=>(0,o._)("span",null,[(0,o.Uk)(" Don't have an account? "),(0,o._)("a",{href:"#"},"Sign up")],-1))),R={class:"listing padding-top--24 padding-bottom--24 flex-flex center-center"},U=a((()=>(0,o._)("span",null,[(0,o._)("a",{href:"https://dirkhe1051931999.github.io/quasar/",target:"__blank",class:"bg-gradient-primary text-gradient"},"vue2 with quasar and use vue-class-decorator")],-1))),E={class:"useSwipeVerifyCode"},$=a((()=>(0,o._)("div",{class:"text-h6"},"Use swipe verification code to verify",-1))),P=a((()=>(0,o._)("div",{id:"captcha"},null,-1)));function q(t,e,i,a,q,A){const D=(0,o.up)("q-icon"),j=(0,o.up)("q-card-section"),z=(0,o.up)("q-card"),W=(0,o.Q2)("ripple");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",r,[(0,o._)("div",d,[l,(0,o._)("div",c,[(0,o._)("div",h,[(0,o._)("h3",p,(0,s.zw)(t.PrdTitle),1)]),(0,o._)("div",f,[(0,o._)("div",u,[(0,o._)("div",v,[g,(0,o._)("form",x,[(0,o._)("div",m,[w,(0,o.wy)((0,o._)("input",{type:"text",name:"email",autocapitalize:"off","onUpdate:modelValue":e[0]||(e[0]=e=>t.username=e),autocomplete:"new-password"},null,512),[[n.nr,t.username]])]),(0,o._)("div",y,[b,(0,o.wy)((0,o._)("input",{type:"text",name:"password",class:"input-password","onUpdate:modelValue":e[1]||(e[1]=e=>t.password=e),autocapitalize:"off",autocomplete:"new-password"},null,512),[[n.nr,t.password]])]),(0,o.wy)((0,o._)("div",C,[_,(0,o._)("div",k,[(0,o.wy)((0,o._)("input",{type:"text",name:"verifyCode","onUpdate:modelValue":e[2]||(e[2]=e=>t.verifyCode=e),autocapitalize:"off",style:{width:"55%",height:"100%"},autocomplete:"new-password"},null,512),[[n.nr,t.verifyCode]]),O])],512),[[n.F8,t.useVerifyCode]]),(0,o._)("div",L,[(0,o._)("label",{for:"checkbox",onClick:e[4]||(e[4]=e=>t.useSwipeVerifyCode=!t.useSwipeVerifyCode)},[(0,o.wy)((0,o._)("input",{type:"checkbox",name:"checkbox","onUpdate:modelValue":e[3]||(e[3]=e=>t.useSwipeVerifyCode=e)},null,512),[[n.e8,t.useSwipeVerifyCode]]),(0,o.Uk)(" Use swipe verification code to verify? ")])]),(0,o._)("div",S,[(0,o._)("label",{for:"checkbox",onClick:e[6]||(e[6]=e=>t.useVerifyCode=!t.useVerifyCode)},[(0,o.wy)((0,o._)("input",{type:"checkbox",name:"checkbox","onUpdate:modelValue":e[5]||(e[5]=e=>t.useVerifyCode=e)},null,512),[[n.e8,t.useVerifyCode]]),(0,o.Uk)(" Use verification code to verify? ")])]),(0,o._)("div",I,[(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{class:"login-submit-button bg-gradient-primary",onClick:e[7]||(e[7]=(0,n.iM)(((...e)=>t.handLogin&&t.handLogin(...e)),["prevent"]))},[(0,o.Uk)(" Login ")])),[[W]])]),T])])]),(0,o._)("div",V,[M,(0,o._)("div",R,[U,(0,o.Wm)(D,{name:"arrow_forward_ios",class:"fs-18 text-primary bg-gradient-primary text-gradient"})])])])])])]),(0,o.wy)((0,o._)("div",E,[(0,o.Wm)(z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[$])),_:1}),(0,o.Wm)(j,{class:"q-pt-none"},{default:(0,o.w5)((()=>[P])),_:1})])),_:1})],512),[[n.F8,t.showUseSwipeVerifyCode]])])}var A=i(59857),D=i(6128),j=i(24642);function z(){const t="a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z";return t.split(",")}function W(t,e){return Math.floor(Math.random()*(e-t)+t)}function H(t,e){const i=W(t,e),o=W(t,e),s=W(t,e);return`rgb(${i},${o},${s})`}class Q{constructor(t){if(this.options={domId:"",canvasId:"verifyCanvas",width:"100",height:"30",type:"blend",code:"",numArr:[],letterArr:[]},!t)throw new Error("invalid dom ID");this.options.domId=t,this.init(),this.refresh()}init(){this.options.numArr="0,1,2,3,4,5,6,7,8,9".split(","),this.options.letterArr=z();const t=document.getElementById(this.options.domId);if(!t)throw new Error("invalid dom");const e=document.createElement("canvas");this.options.width=t.offsetWidth>0?t.offsetWidth:"100",this.options.height=t.offsetHeight>0?t.offsetHeight:"30",e.id=this.options.canvasId,e.width=this.options.width,e.height=this.options.height,e.style.cursor="pointer",e.innerHTML="您的浏览器版本不支持canvas",t.appendChild(e),e.onclick=()=>{this.refresh()}}refresh(){const t=document.getElementById(this.options.canvasId);let e,i;if(this.options.code="",t.getContext){e=t.getContext("2d"),e.textBaseline="middle",e.fillStyle=H(180,240),e.fillRect(0,0,this.options.width,this.options.height),i="blend"==this.options.type?this.options.numArr.concat(this.options.letterArr):"number"==this.options.type?this.options.numArr:this.options.letterArr;for(let t=1;t<=4;t++){const o=i[W(0,i.length)];this.options.code+=o,e.font=`${W(this.options.height/2,this.options.height)}px SimHei`,e.fillStyle=H(50,160),e.shadowOffsetX=W(-3,3),e.shadowOffsetY=W(-3,3),e.shadowBlur=W(-3,3),e.shadowColor="rgba(0, 0, 0, 0.3)";const s=this.options.width/5*t,n=this.options.height/2,a=W(-30,30);e.translate(s,n),e.rotate(a*Math.PI/180),e.fillText(o,0,0),e.rotate(-a*Math.PI/180),e.translate(-s,-n)}for(let t=0;t<4;t++)e.strokeStyle=H(40,180),e.beginPath(),e.moveTo(W(0,this.options.width),W(0,this.options.height)),e.lineTo(W(0,this.options.width),W(0,this.options.height)),e.stroke();for(let t=0;t<this.options.width/4;t++)e.fillStyle=H(0,255),e.beginPath(),e.arc(W(0,this.options.width),W(0,this.options.height),1,0,2*Math.PI),e.fill()}}validate(t){t=t.toLowerCase();const e=this.options.code.toLowerCase();return t==e}}class X{constructor(t,e){this.option={width:280,height:155,PI:Math.PI,sliderL:42,sliderR:9,offset:5,loadingText:"Loading...",failedText:"Refresh",barText:"Swipe right to fill the puzzle",maxLoadCount:3,localImages:()=>"/866-536x354.jpg",verify:(t,e)=>!0,remoteUrl:null,outSrc:"",onRefresh:()=>{},onSuccess:()=>{},onFail:()=>{}},this.canvasOption={},this.$element=t,this.option=Object.assign({},this.option,e),this.$element.style.position="relative",this.$element.style.width=`${this.option.width}px`,this.$element.style.margin="0 auto",this.init()}init(){this.initDOM(),this.initImg(),this.bindEvents()}initDOM(){const t=(t,e)=>{const i=document.createElement(t);return i.className=e,i},e=(t,e)=>{const i=document.createElement("canvas");return i.width=t,i.height=e,i},i=e(this.option.width-2,this.option.height),o=i.cloneNode(!0),s=t("div","sliderContainer"),n=t("i","refreshIcon "),a=t("div","sliderMask"),r=t("div","sliderbg"),d=t("div","slider"),l=t("i",""),c=t("span","sliderText");o.className="slidercaptcha-block",c.innerHTML=this.option.barText,n.innerHTML="Refresh",l.innerHTML="→";const h=this.$element;h.appendChild(i),h.appendChild(n),h.appendChild(o),d.appendChild(l),a.appendChild(d),s.appendChild(r),s.appendChild(a),s.appendChild(c),h.appendChild(s),Object.assign(this.canvasOption,{canvas:i,block:o,sliderContainer:s,refreshIcon:n,slider:d,sliderMask:a,sliderIcon:l,text:c,canvasCtx:i.getContext("2d"),blockCtx:o.getContext("2d"),x:0})}initImg(){let t,e,i="";const o=window.navigator.userAgent.indexOf("Trident")>-1,s=this.option.sliderL+2*this.option.sliderR+3,n=(i,s)=>{const n=this.option.sliderL,a=this.option.sliderR,r=this.option.PI;i.beginPath(),i.moveTo(t,e),i.arc(t+n/2,e-a+2,a,.72*r,2.26*r),i.lineTo(t+n,e),i.arc(t+n+a-2,e+n/2,a,1.21*r,2.78*r),i.lineTo(t+n,e+n),i.lineTo(t,e+n),i.arc(t+a-2,e+n/2,a+.4,2.76*r,1.24*r,!0),i.lineTo(t,e),i.lineWidth=2,i.fillStyle="rgba(255, 255, 255, 0.7)",i.strokeStyle="rgba(255, 255, 255, 0.7)",i.stroke(),i[s](),i.globalCompositeOperation=o?"xor":"destination-over"},a=(t,e)=>Math.round(Math.random()*(e-t)+t),r=new Image;r.crossOrigin="Anonymous";let d=0;r.onload=()=>{this.canvasOption.x=t=a(s+10,this.option.width-(s+10)),e=a(10+2*this.option.sliderR,this.option.height-(s+10)),n(this.canvasOption.canvasCtx,"fill"),n(this.canvasOption.blockCtx,"clip"),this.canvasOption.canvasCtx.drawImage(r,0,0,this.option.width-2,this.option.height),this.canvasOption.blockCtx.drawImage(r,0,0,this.option.width-2,this.option.height);const i=e-2*this.option.sliderR-1,o=this.canvasOption.blockCtx.getImageData(t-3,i,s,s);this.canvasOption.block.width=s,this.canvasOption.blockCtx.putImageData(o,0,i+1),this.canvasOption.text.textContent=this.canvasOption.text.getAttribute("data-text")},r.onerror=()=>{if(d++,"file:"===window.location.protocol)throw d=this.option.maxLoadCount,new Error("can't load pic resource file from File protocal. Please try http or https");if(d>=this.option.maxLoadCount)return this.canvasOption.text.textContent="Image failed to load",void this.canvasOption.text.classList.add("text-red");r.src=this.option.localImages()},this.option.outSrc&&(i=this.option.outSrc),r.src=i,this.canvasOption.text.setAttribute("data-text",this.option.barText),this.canvasOption.text.textContent=this.option.loadingText}bindEvents(){this.$element.addEventListener("selectstart",(()=>!1)),this.canvasOption.refreshIcon.addEventListener("click",(()=>{this.canvasOption.text.textContent=this.option.barText,this.reset(),this.option.onRefresh.call(this.$element)}));let t,e,i=[],o=!1;const s=i=>{this.canvasOption.text.classList.contains("text-danger")||(t=i.clientX||i.touches[0].clientX,e=i.clientY||i.touches[0].clientY,o=!0)},n=s=>{if(!o)return!1;const n=s.clientX||s.touches[0].clientX,a=s.clientY||s.touches[0].clientY,r=n-t,d=a-e;if(r<0||r+40>this.option.width)return!1;this.canvasOption.slider.style.left=r-1+"px";const l=(this.option.width-40-20)/(this.option.width-40)*r;this.canvasOption.block.style.left=`${l}px`,this.canvasOption.sliderContainer.classList.add("sliderContainer_active"),this.canvasOption.sliderMask.style.width=`${r+4}px`,i.push(Math.round(d))},a=e=>{if(!o)return!1;o=!1;const s=e.clientX||e.changedTouches[0].clientX;if(s===t)return!1;this.canvasOption.sliderContainer.classList.remove("sliderContainer_active"),this.canvasOption.trail=i;const n=this.verify();n.spliced&&n.verified?(this.canvasOption.sliderContainer.classList.add("sliderContainer_success"),this.option.onSuccess.call(this.$element)):(this.canvasOption.sliderContainer.classList.add("sliderContainer_fail"),this.option.onFail.call(this.$element),setTimeout((()=>{this.canvasOption.text.innerHTML=this.option.failedText,this.reset()}),1e3))};this.canvasOption.slider.addEventListener("mousedown",s),this.canvasOption.slider.addEventListener("touchstart",s),document.addEventListener("mousemove",n),document.addEventListener("touchmove",n),document.addEventListener("mouseup",a),document.addEventListener("touchend",a),document.addEventListener("mousedown",(()=>!1)),document.addEventListener("touchstart",(()=>!1)),document.addEventListener("swipe",(()=>!1))}clean(){this.canvasOption.canvasCtx.clearRect(0,0,this.option.width,this.option.height),this.canvasOption.blockCtx.clearRect(0,0,this.option.width,this.option.height),this.canvasOption.block.width=this.option.width}verify(){const t=this.canvasOption.trail,e=parseInt(this.canvasOption.block.style.left);let i=!1;if(null!==this.option.remoteUrl)i=this.option.verify(t,this.option.remoteUrl);else{const e=function(t,e){return t+e},o=function(t){return t*t},s=t.reduce(e)/t.length,n=t.map((t=>t-s)),a=Math.sqrt(n.map(o).reduce(e)/t.length);i=0!==a}return{spliced:Math.abs(e-this.canvasOption.x)<this.option.offset,verified:i}}reset(){this.canvasOption.sliderContainer.classList.remove("sliderContainer_fail"),this.canvasOption.sliderContainer.classList.remove("sliderContainer_success"),this.canvasOption.slider.style.left=0,this.canvasOption.block.style.left=0,this.canvasOption.sliderMask.style.width=0,this.clean(),this.canvasOption.text.setAttribute("data-text",this.canvasOption.text.textContent),this.canvasOption.text.textContent=this.option.loadingText,this.initImg()}}var F=i(48359),Y=function(t,e,i,o){var s,n=arguments.length,a=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a},Z=function(t,e,i,o){function s(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,n){function a(t){try{d(o.next(t))}catch(e){n(e)}}function r(t){try{d(o["throw"](t))}catch(e){n(e)}}function d(t){t.done?i(t.value):s(t.value).then(a,r)}d((o=o.apply(t,e||[])).next())}))};let B=class extends A.Vue{constructor(){super(...arguments),this.otherQuery={},this.username="admin",this.password="123456",this.verifyCode="",this.PrdTitle=D.TN,this.useVerifyCode=!1,this.useSwipeVerifyCode=!1,this.showUseSwipeVerifyCode=!1,this.lockShowUseSwipeVerifyCode=!1}onRouteChange(t){const e=t.query;e&&(this.redirect=e.redirect,this.otherQuery=this.getOtherQuery(e))}created(){}mounted(){try{this.verifyCodeInstance=new Q("verify-code-login")}catch(t){console.log(t)}}getOtherQuery(t){return Object.keys(t).reduce(((e,i)=>("redirect"!==i&&(e[i]=t[i]),e)),{})}handLogin(){return Z(this,void 0,void 0,(function*(){let t=!0;if(this.useVerifyCode&&(t=this.verifyCodeInstance.validate(this.verifyCode)),!t)return void this.$globalMessage.show({type:"error",content:"Wrong verification code"});const e=()=>Z(this,void 0,void 0,(function*(){this.$q.loading.show(),yield j.z.Login({username:this.username,password:this.password}),this.$q.loading.hide(),this.useSwipeVerifyCode=!1,this.useVerifyCode=!1,this.$globalMessage.show({type:"success",content:this.$t("messages.success")}),yield(0,F._v)(500),location.reload()}));if(this.useSwipeVerifyCode){if(!this.lockShowUseSwipeVerifyCode){this.lockShowUseSwipeVerifyCode=!0,this.showUseSwipeVerifyCode=!0;var i=new X(document.querySelector("#captcha"),{id:"captcha",onSuccess:()=>{var t=setTimeout((()=>{this.showUseSwipeVerifyCode=!1,this.lockShowUseSwipeVerifyCode=!1,window.clearTimeout(t),i.reset(),e()}),500)}})}}else e()}))}};Y([(0,A.Watch)("$route",{immediate:!0})],B.prototype,"onRouteChange",null),B=Y([(0,A.Component)({name:"LoginPage"})],B);const N=B;var G=i(11639),J=i(51017),K=i(67054),tt=i(52558),et=i(76254),it=i(69984),ot=i.n(it);const st=(0,G.Z)(N,[["render",q],["__scopeId","data-v-19261fda"]]),nt=st;ot()(N,"components",{QIcon:J.Z,QCard:K.Z,QCardSection:tt.Z}),ot()(N,"directives",{Ripple:et.Z})}}]);